<%= form_with model: document, class: 'space-y-6' do |f| %>
  <% if document.errors.any? %>
    <div class="bg-red-50 border border-red-200 rounded-lg p-4">
      <div class="flex items-start gap-3">
        <svg class="w-5 h-5 text-red-500 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
        <div>
          <h3 class="font-medium text-red-800"><%= pluralize(document.errors.count, "error") %> prevented this document from being saved:</h3>
          <ul class="mt-2 text-sm text-red-700 list-disc list-inside">
            <% document.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
  <% end %>

  <div class="grid md:grid-cols-2 gap-6">
    <!-- Name -->
    <div class="md:col-span-2">
      <%= f.label :name, class: 'block text-sm font-medium text-slate-700 mb-1' %>
      <%= f.text_field :name, class: 'w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500', placeholder: 'e.g., HIPAA Business Associate Agreement' %>
    </div>

    <!-- Category -->
    <div>
      <%= f.label :compliance_category_id, 'Category', class: 'block text-sm font-medium text-slate-700 mb-1' %>
      <%= f.collection_select :compliance_category_id, @categories, :id, :name, { include_blank: 'Select category...' }, class: 'w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500' %>
    </div>

    <!-- Document Type -->
    <div>
      <%= f.label :document_type, class: 'block text-sm font-medium text-slate-700 mb-1' %>
      <%= f.select :document_type, [['License', 'license'], ['Certificate', 'certificate'], ['Policy', 'policy'], ['Agreement', 'agreement'], ['Training', 'training'], ['Other', 'other']], { include_blank: 'Select type...' }, class: 'w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500' %>
    </div>

    <!-- Issue Date -->
    <div>
      <%= f.label :issue_date, class: 'block text-sm font-medium text-slate-700 mb-1' %>
      <%= f.date_field :issue_date, class: 'w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500' %>
    </div>

    <!-- Expiration Date -->
    <div>
      <%= f.label :expiration_date, class: 'block text-sm font-medium text-slate-700 mb-1' %>
      <%= f.date_field :expiration_date, class: 'w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500' %>
    </div>

    <!-- Assigned To -->
    <div>
      <%= f.label :assigned_to_id, 'Assign To', class: 'block text-sm font-medium text-slate-700 mb-1' %>
      <%= f.collection_select :assigned_to_id, @team_members, :id, :full_name, { include_blank: 'Unassigned' }, class: 'w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500' %>
    </div>

    <!-- Reference Number -->
    <div>
      <%= f.label :reference_number, class: 'block text-sm font-medium text-slate-700 mb-1' %>
      <%= f.text_field :reference_number, class: 'w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500', placeholder: 'e.g., LIC-2026-12345' %>
    </div>

    <!-- Issuing Authority -->
    <div class="md:col-span-2">
      <%= f.label :issuing_authority, class: 'block text-sm font-medium text-slate-700 mb-1' %>
      <%= f.text_field :issuing_authority, class: 'w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500', placeholder: 'e.g., State Medical Board' %>
    </div>

    <!-- Description -->
    <div class="md:col-span-2">
      <%= f.label :description, class: 'block text-sm font-medium text-slate-700 mb-1' %>
      <%= f.text_area :description, rows: 3, class: 'w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500', placeholder: 'Add any notes about this document...' %>
    </div>

    <!-- File Upload -->
    <div class="md:col-span-2">
      <%= f.label :file, class: 'block text-sm font-medium text-slate-700 mb-1' %>
      <div class="border-2 border-dashed border-slate-200 rounded-lg p-6 text-center hover:border-emerald-300 transition-colors">
        <svg class="w-10 h-10 text-slate-400 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/></svg>
        <p class="text-sm text-slate-600 mb-2">Drop your file here, or <span class="text-emerald-600 font-medium">browse</span></p>
        <p class="text-xs text-slate-400">PDF, DOC, DOCX up to 10MB</p>
        <%= f.file_field :file, class: 'absolute inset-0 w-full h-full opacity-0 cursor-pointer', accept: '.pdf,.doc,.docx,.png,.jpg,.jpeg' %>
      </div>
      <% if document.file.attached? %>
        <p class="mt-2 text-sm text-slate-600">Current file: <%= document.file.filename %></p>
      <% end %>
    </div>

    <!-- Auto Remind -->
    <div class="md:col-span-2">
      <label class="flex items-center gap-3 cursor-pointer">
        <%= f.check_box :auto_remind, class: 'w-5 h-5 text-emerald-600 border-slate-300 rounded focus:ring-emerald-500' %>
        <div>
          <span class="font-medium text-slate-900">Enable automatic reminders</span>
          <p class="text-sm text-slate-500">You'll be notified at 90, 60, 30, and 7 days before expiration</p>
        </div>
      </label>
    </div>
  </div>

  <div class="flex items-center justify-end gap-3 pt-6 border-t border-slate-200">
    <%= link_to 'Cancel', documents_path, class: 'px-5 py-2.5 text-slate-700 hover:bg-slate-100 rounded-lg font-medium transition-colors' %>
    <%= f.submit document.persisted? ? 'Save Changes' : 'Upload Document', class: 'px-5 py-2.5 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg font-semibold transition-colors cursor-pointer' %>
  </div>
<% end %>
